name: ğŸ¤– Auto Blog Update & Deploy

on:
  push:
    paths:
      - 'blog/*.html'
  workflow_dispatch:

jobs:
  auto-update-blog:
    name: ğŸ“ Update Blog Index
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '18'
      - run: npm install jsdom fs-extra
      - run: |
          echo "ğŸ¤– AI Art Studio ãƒ–ãƒ­ã‚°è‡ªå‹•æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ "
          echo "ğŸ“Š ãƒ–ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚¹ã‚­ãƒ£ãƒ³ä¸­..."
          if [ -d "blog" ]; then
            echo "âœ… blogãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç™ºè¦‹"
            echo "ğŸ“ è¨˜äº‹æ•°: $^(ls blog/*.html 2^>/dev/null ^| wc -l^)"
          else
            echo "âš ï¸  blogãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
          fi
          echo "ğŸ¯ ç°¡æ˜“index.htmlæ›´æ–°ä¸­..."
          cat > index.html << 'HTML'
          <!DOCTYPE html>
          <html lang="ja">
          <head>
              <meta charset="UTF-8">
              <title>AI Art Studio - ãƒ¬ã‚¤ãƒŠã®è‡ªå‹•ãƒ–ãƒ­ã‚°</title>
              <meta name="description" content="ãƒ¬ã‚¤ãƒŠãŒä½œã£ãŸå®Œå…¨è‡ªå‹•åŒ–ãƒ–ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ">
              <style>
                  body { font-family: Arial, sans-serif; background: #020210; color: #e0faff; margin: 0; padding: 20px; }
                  .container { max-width: 800px; margin: 0 auto; text-align: center; }
                  h1 { color: #8aff00; font-size: 2.5rem; }
                  .status { background: rgba(138,255,0,0.1); padding: 20px; border-radius: 10px; margin: 20px 0; }
              </style>
          </head>
          <body>
              <div class="container">
                  <h1>ğŸ¤– AI Art Studio</h1>
                  <p>ãƒ¬ã‚¤ãƒŠãŒä½œã£ãŸå®Œå…¨è‡ªå‹•åŒ–ãƒ–ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§ã™â™ª</p>
                  <div class="status">
                      <h2>ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³</h2>
                      <p>âœ… GitHub Actionsè‡ªå‹•æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒä¸­</p>
                      <p>ğŸ¤– æœ€çµ‚æ›´æ–°: $(date)</p>
                      <p>ğŸ“ ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’è¿½åŠ ã™ã‚‹ã¨è‡ªå‹•ã§æ›´æ–°ã•ã‚Œã¾ã™</p>
                  </div>
                  <div class="footer">
                      <p>Made with â¤ï¸ by ãƒ¬ã‚¤ãƒŠ - AIæŠ€è¡“ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆ</p>
                  </div>
              </div>
          </body>
          </html>
          HTML
      - run: |
          git config --local user.email "action@github.com"
          git config --local user.name "AI Studio Bot"
          if [[ -n $(git status --porcelain) ]]; then
            git add index.html
            git commit -m "ğŸ¤– Auto-update: $^(date^)"
            git push
          fi
